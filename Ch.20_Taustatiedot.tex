\chapter{Nykyiset salausjärjestelmät\label{methods}}

Käymme nyt läpi yleisimpiä salausjärjestelmiä, joihin jokainen tietojärjestelmien käyttäjä törmää nykypäivänä tiedostaen tai tiedostamattaan. Käymme läpi salausjärjestelmien ideat ja miten kvanttitietokoneet uhkaavat niitä.

Jatkossa avaimesta puhuttaessa tarkoitetaan tässä kontekstissa salausavainta, jolla voidaan purkaa tai salata lähetettävä viesti. Käytännössä tämä avain on vain \emph{k} bittiä pitkä bittijono, joka on muodostettu jonkin salausavainten luontiin tarkoitetun algoritmin avulla.

\section{Symmetrinen salaus}
 Symmetrisessä salauksessa sekä viestin lähettäjän eli salaajan sekä viestin vastaanottajan eli salauksen purkajan täytyy tietää sama avain (\cite{bellare2005introduction}). Toisin sanoen symmetrisessä salauksessa viestin salaus puretaan samalla avaimella kuin millä viesti salataan.  Symmetrisessä salauksessa ongelmallista on salausavaimen jakaminen turvallisesti ja luottamuksellisesti osapuolien välillä. Jos symmetriseen salaukseen käytetty salausavain joutuu jonkun kolmannen osapuolen käsiin, voi tämä osapuoli purkaa salauksen tällä avaimella. Esimerkki symmetrisestä salausjärjestelmästä on lohkosalaukseen (\emph{blockcipher}) perustuva AES (\emph{Advanced Encryption Standard}).
 
 Symmetrinen salaus on itsessään jo melko kvanttiturvallinen, koska niiden murtamiseen käytetään yleensä raa'an voiman (\emph{brute-force}) tekniikoita (\cite{mavroeidis2018impact}). Toistaiseksi ei ole löydetty kvanttialgoritmeja, jotka murtaisivat symmetristä salausta käyttäviä järjestelmiä huomattavan tehokkaasti siten, että ne olisi uhattuna. 
 
 \emph{Groverin algoritmi} on kvanttialgoritmi, joka tuo neliöllisen nopeutuksen kvanttitietokoneella tehtyihin brute-force hyökkäyksiin. Kvanttitietokone joka käyttää Groverin algoritmia \emph{n}-bittisen salausavaimen purkamiseen laskee avaimen nopeudella $\sqrt{2^{n}} = 2^{n/2}$. Toisaalta nämä hyökkäykset voidaan estää esimerkiksi tuplaamalla salausavaimen käyttämä bittien määrä. Tällöin täytyy tehdä enemmän laskentaa ja laskuoperaatioita, joka vie taas enemmän aikaa. AES-128 ja AES-256 ovat kvanttiturvallisia lohkosalaukseen perustuvia salausjärjestelmiä. Tällöin 128-bittinen AES salaus antaisi 64-bittisen salauksen. 80-bittistä salausta pidetään turvallisena klassisella tietokoneella. Alalla vallitseva yleinen konsensus on, että AES-256 säilyy kvanttiturvallisena symmetrisena salausjärjestelmänä toistaiseksi moniksi vuosiksi eteenpäin nykyisellä kvanttitietokoneiden kehitystahdilla ja myös silloin kun kvanttitietokoneet ovat yleistyneet.
 
 \section{Julkisen avaimen salaus}
 Epäsymmetrisessa eli julkisen avaimen salauksessa on käytössä kaksi avainta. Toinen on niin kutsuttu julkinen avain (\emph{public key}) ja toinen salainen avain (\emph{secret key\footnote{Joskus myös \emph{private key}}}) (\cite{bellare2005introduction}). Julkisen avaimen salausjärjestelmässä jokainen käyttäjä luo itselleen parin avaimia, jotka ovat salausavain ja purkuavain. Tässä tapauksessa purkuavain on salainen avain ja sitä ei missään nimessä pidä paljastaa muille. Tällöin salausavain on julkinen avain, joka saa ja pitää olla julkisesti esillä. Viestin lähetys toimii nyt seuraavasti:
 
 \begin{enumerate}
     \item Lähettäjä \emph{S} lähettää viestin vastaanottajalle \emph{R}.
     \item \emph{S} salaa viestin \emph{R}:n julkisella avaimella $PK_{R}$.
     \item \emph{R} saa \emph{S}:n viestin vastaan ja purkaa sen salauksen omalla salaisella avaimellaan $SK_{R}$.
 \end{enumerate}
Ero symmetriseen salaukseen epäsymmetrisessa salauksessa on siis se, että salaus puretaan eri avaimella kuin millä se salataan.
 
  Julkisen avaimen salausjärjestelmien tarjoama suojaus perustuu tiettyihin vaikeisiin lukuteorian ongelmiin. Näitä ongelmia ovat muun muassa suurten alkulukujen jako tekijöihinsä (\emph{Integer Factorization Problem}) sekä niin kutsuttu diskreetin logaritmin ongelma (\emph{Discrete Logarithm Problem}) (\cite{10.1007/978-3-319-11659-4_15}).
  Yksi ensimmäisiä ja tänäkin päivänä käytetyimpiä julkisen avaimen salausjärjestelmiä on RSA, joka on nimetty keksijöidensä (Rivest, Shamir ja Adleman) mukaan. RSA:n tarjoama suojaus perustuu suurten alkulukujen tekijöihin jakoon (\cite{montgomery1994survey}). RSA:n avainpari luodaan seuraavasti  (\cite{doi:10.1080/23742917.2016.1226650}):
  
  \begin{enumerate}
  
      \item Valitaan kaksi suurta alkulukua \emph{p} ja \emph{q}, missä $p \neq q$.
      
      \item Lasketaan $n = pq$.
      
      \item Lasketaan $\phi(n)\footnote{$\phi(n)$ on Eulerin $\phi$-funktio (\emph{Euler's totient}), joka kertoo montako $k \leq n$ kokonaislukua löytyy, jotka ovat \emph{n}:n tekijöitä (\cite{lehmer1932euler}).} = \phi(p)\phi(q) = (p-1)(q-1)$.  Laskutoimituksesta saadaan salainen avain.
      
      \item Valitaan kokonaisluku \emph{e} siten että $1 < e < \phi(n)$ ja $syt(e, \phi(n))\footnote{\emph{Suurin yhteinen tekijä} eli suurin kokonaisluku joka jakaa \emph{e}:n sekä $\phi(n)$ (\cite{doi:10.1137/S0036144598347011})} = 1$.
      
      \item Lasketaan $de \equiv 1 \mod \phi(n)$.
  
  \end{enumerate}
  Nyt siis julkinen avain (\emph{n}, \emph{e}) koostuu siis jakojäännöksestä \emph{n} ja salauseksponentista (\emph{encryption exponent}) \emph{e}. Salainen avain (\emph{n}, \emph{d}) koostuu jakojäännöksestä \emph{n} ja purkueksponentista (\emph{decryption exponent}) \emph{d}.
  
 Nämä edellä mainitut ongelmat ovat laskennallisesti hyvin haastavia ja niihin ei tunneta tehokkaita ja nopeita ratkaisuja isoilla syötteillä klassisilla tietokoneilla minkä takia niitä on hyvä käyttää salausjärjestelmissä. Toisaalta kummallekkin ongelmalle tunnetaan tehokkaita ratkaisuja, jotka voidaan suorittaa kvanttitietokoneella. Peter Shor esitti vuonna 1994 Shorin algoritmin jota käyttäen edellä mainitut vaikeat lukuteorian ongelmat voidaan ratkaista tehokkaasti eli polynomisessa ajassa kvanttitietokoneella (\cite{10.1007/978-3-319-11659-4_15}).
 
 \section{Tiivistefunktiot}
 Tiivistefunktiot (\emph{hash-functions}) eli hashit  ovat funktioita, jotka ottavat mielivaltaisen pituisen merkkijonon \emph{M} ja muodostavat siitä aina tietyn mittaisen toisen merkkijonon \emph{MD}, jota kutsutaan tiivisteeksi. Formaalimmin tiivistefunktio on funktio:
 
 \[h: D \to R, \text{ missä } D = \big\{0,1\big\}^{*}, R = \big\{0,1\big\}^{n}, \text{ jollain } n >= 1.\] (\cite{sobti2012cryptographic}). Voi siis ajatella, että tällainen hash ottaa merkkijonon ja tiivistää sen toiseksi merkkijonoksi, josta tulee sana tiiviste.
 
 Yleisesti käytettyjä tiivistefunktoita ovat muun muassa SHA1 ja MD-5. Esimerkiksi SHA1 tiivistefunktio muodostaa syötteestä aina 160 bittiä pitkän tiivisteen (\cite{bellare2005introduction}). Tärkeä ominaisuus tiivistefunktioissa on se, että ne toimivat yhteen suuntaan. Viestistä \emph{M} on helposti saatavissa tiiviste \emph{MD} funktiolla \emph{F}, mutta tiivisteestä \emph{MD} ja funktiosta \emph{F} ei voi helposti päätellä tai muodostaa viestiä \emph{M} (\cite{bakhtiari1995cryptographic}). Toisin sanoen kun jostain viestistä, esimerkiksi salasanasta, on tehty tiiviste niin ei ole olemassa yleistä menetelmää, jolla tämä \emph{hashaus} voitaisiin peruuttaa tai saataisiin selville itse funktio \emph{F}.
 
 Tiivistefunktiot ovat myös jo itsessään melko kvanttiturvallisia (\cite{mavroeidis2018impact}). Tiivistefunktiot muodostavat lohkosalauksen tapaan tietyn mittaisen bittijonon tiivisteen muodossa. Groverin algoritmia ja syntymäpäiväparadoksia hyödyntäen on mahdollista tehdä hyökkäys. Jos Groverin algoritmilta tahtoo suojautua, tarvitaan \emph{n}-bitin suojaukseen 3\emph{n}-bittiä pitkä bittijono. Esimerkiksi SHA-2 ja SHA-3 standardin tiivistefunktiot pitkillä bittijonoilla ovat kvanttiturvallisia.
 
 \section{Digitaalinen allekirjoitus}
 Digitaalinen allekirjoitus (\emph{digital signature}) on menetelmä, jolla voidaan todentaa digitaalisia dokumentteja (\cite{1649003}). Sen toimintaperiaate on analoginen perinteisiin allekirjoituksiin verrattuna. Digitaalisella allekirjoituksella todennetaan muun muassa digitaalisen dokumentin datan eheys. Eheydellä voidaan tässä kontekstissa tarkoittaa esimerkiksi dokumentin päivämäärää tai sisältämää informaatiota.
 
 Digitaalisen allekirjoituksen luominen yhdistelee edellä mainittuja salausjärjestelmiä kuten tiivistefunktioita ja julkisen tai symmetrisen avaimen salausta. Digitaalinen allekirjoitus on käytännössä bittijono, jonka jokin digitaalisen allekirjoituksen luomiseen tarkoitettu algoritmi luo. Tämä allekirjoitus muodostetaan allekirjoitettavien dokumenttien ja jonkin vain viestin lähettäjän määrittelemän tiedon mukaan. Digitaalisen allekirjoituksen luominen koostuu yleensä kolmesta eri vaiheesta; salausavaimen generointi, digitaalisen allekirjoituksen generointi ja digitaalisen allekirjoituksen varmennus. Salausavain voidaan generoida jollain edellämainituista menetelmistä kuten julkisen avaimen salauksella tai symmetrisella salauksella.