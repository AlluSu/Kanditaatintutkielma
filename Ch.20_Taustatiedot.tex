\chapter{Nykyiset salausjärjestelmät\label{methods}}

Käymme nyt läpi yleisimpiä salausjärjestelmiä, joihin jokainen tietojärjestelmien käyttäjä törmää nykypäivänä tiedostaen tai tiedostamattaan. Käymme läpi salausjärjestelmien ideat ja miten kvanttitietokoneet uhkaavat niitä.

Jatkossa avaimesta puhuttaessa tarkoitetaan tässä kontekstissa salausavainta, jolla voidaan purkaa tai salata lähetettävä viesti. Käytännössä tämä avain on vain \emph{k} bittiä pitkä bittijono, joka on muodostettu jonkin salausavainten luontiin tarkoitetun algoritmin avulla.

\section{Symmetrinen salaus}
 Symmetrisessä salauksessa sekä viestin lähettäjän eli salaajan sekä viestin vastaanottajan eli salauksen purkajan täytyy tietää sama avain (\cite{bellare2005introduction}). Toisin sanoen symmetrisessä salauksessa viestin salaus puretaan samalla avaimella kuin millä viesti salataan.  Symmetrisessä salauksessa ongelmallista on salausavaimen jakaminen turvallisesti ja luottamuksellisesti osapuolien välillä. Jos symmetriseen salaukseen käytetty salausavain joutuu jonkun kolmannen osapuolen käsiin, voi tämä osapuoli purkaa salauksen tällä avaimella. Esimerkki symmetrisestä salausjärjestelmästä on lohkosalaukseen (\emph{blockcipher}) perustuva AES (\emph{Advanced Encryption Standard}). TÄHÄN VIITE ALKUPERÄISEEN PAPERIIN
 
 Symmetrinen salaus on itsessään jo melko kvanttiturvallinen, koska niiden murtamiseen käytetään yleensä raa'an voiman (\emph{brute-force}) tekniikoita (\cite{mavroeidis2018impact}). Toistaiseksi ei ole löydetty kvanttialgoritmeja, jotka murtaisivat symmetristä salausta käyttäviä järjestelmiä huomattavan tehokkaasti siten, että ne olisi uhattuna muuttua turvattomiksi. Kuitenkin \emph{Groverin algoritmia} hyödyntämällä on mahdollista nopeuttaa kvanttitietokoneella tehtyjä brute-force hyökkäyksiä.
 
 Lyhyesti Groverin algoritmi on kvanttialgoritmi, jota käytetään tiedon hakemiseen (\cite{hayward2008quantum}). Groverin algoritmi löytää järjestämättömästä listasta, jonka koko on \emph{N}, halutun alkion $\sqrt{N}$ askeleella. Klassisilla tietokoneilla ja algoritmeilla tällaisessa tehtävässä menee aina vähintään $N$ askelta. Siten Groverin algoritmi tuo neliöllisen nopeutuksen kvanttitietokoneella tehtyihin brute-force hyökkäyksiin (\cite{mavroeidis2018impact}). Kvanttitietokone joka käyttää Groverin algoritmia \emph{n}-bittisen salausavaimen purkamiseen laskee avaimen $\sqrt{2^{n}} = 2^{n/2}$ operaatiolla. Toisaalta näitä hyökkäyksiä voidaan hidastaa esimerkiksi tuplaamalla salausavaimen käyttämä bittien määrä. Tällöin esimerkiksi 128-bittinen AES-salaus antaisi 64-bittisen suojauksen. AES-192 ja AES-256 ovat lohkosalaukseen perustuvia salausjärjestelmiä, joita pidetään kvanttiturvallisina nyt ja jatkossa. Nykypäivänä 80-bittistä suojausta pidetään turvallisena rajana klassisella tietokoneella.
 
 \section{Tiivistefunktiot}
 Tiivistefunktiot (\emph{hash functions}) eli puhekielessä hashit  ovat funktioita, jotka ottavat mielivaltaisen pituisen merkkijonon \emph{M} ja muodostavat siitä aina tietyn mittaisen toisen merkkijonon \emph{MD}, jota kutsutaan tiivisteeksi (\cite{sobti2012cryptographic}). Formaalimmin tiivistefunktio on funktio
 \[h: D \to R, \text{ missä } D = \big\{0,1\big\}^{*}, R = \big\{0,1\big\}^{n}, \text{ jollain } n \geq 1.\] Voi siis ajatella, että tällainen hash ottaa merkkijonon ja tiivistää sen toiseksi merkkijonoksi, josta tulee sana tiiviste.
 
 Yleisesti käytettyjä tiivistefunktoita ovat muun muassa SHA1 ja MD-5. Esimerkiksi SHA1 tiivistefunktio muodostaa syötteestä aina 160 bittiä pitkän tiivisteen (\cite{bellare2005introduction}). Tärkeä ominaisuus tiivistefunktioissa on se, että ne toimivat yhteen suuntaan. Viestistä \emph{M} on helposti saatavissa tiiviste \emph{MD} funktiolla \emph{F}, mutta tiivisteestä \emph{MD} ja funktiosta \emph{F} ei voi helposti päätellä tai muodostaa viestiä \emph{M} (\cite{bakhtiari1995cryptographic}). Toisin sanoen kun jostain viestistä, esimerkiksi salasanasta, on tehty tiiviste niin ei ole olemassa yleistä menetelmää, jolla tämä \emph{hashaus} voitaisiin peruuttaa tai saataisiin selville itse funktio \emph{F}.
 
 Tiivistefunktiot ovat itsessään kvanttiturvallisia (\cite{mavroeidis2018impact}). Tiivistefunktiot muodostavat lohkosalauksen tapaan tietyn mittaisen bittijonon tiivisteen muodossa. Groverin algoritmia hyödyntäen on mahdollista tehdä hyökkäys tiivistefunktioita vastaan löytämällä törmäys (\emph{collision}) kahden tiivisteen välillä. Törmäyksellä tarkoitetaan tilannetta milloin kaksi eri syötettä antavat saman tiivisteen. Groverin algoritmilta voi suojautua pidentämällä tiivisteen pituutta. Turvallinen raja on, että \emph{n}-bitin suojaukseen tarvitaan 3\emph{n}-bittiä pitkä tiiviste. Esimerkiksi SHA-2 ja SHA-3 standardin tiivistefunktiot pitkillä bittijonoilla ovat kvanttiturvallisia (\cite{mavroeidis2018impact}).
 
 \section{Julkisen avaimen salaus}
 Epäsymmetrisessa eli julkisen avaimen salauksessa on käytössä kaksi avainta. Toinen on niin kutsuttu julkinen avain (\emph{public key}) ja toinen salainen avain (\emph{secret key\footnote{Joskus myös \emph{private key}}}) (\cite{bellare2005introduction}). Julkisen avaimen salausjärjestelmässä jokainen käyttäjä luo itselleen parin avaimia, jotka ovat salausavain ja purkuavain. Tässä tapauksessa purkuavain on salainen avain ja sitä ei missään nimessä pidä paljastaa muille. Tällöin salausavain on julkinen avain, joka saa ja pitää olla julkisesti esillä. Viestin lähetys toimii nyt seuraavasti:
 
 \begin{enumerate}
     \item Lähettäjä \emph{S} salaa viestin \emph{R}:n julkisella avaimella $PK_{R}$.
     \item \emph{S} lähettää viestin vastaanottajalle \emph{R}.
     \item \emph{R} saa \emph{S}:n viestin vastaan.
     \item \emph{R} purkaa \emph{S}:n salauksen omalla salaisella avaimellaan $SK_{R}$.
 \end{enumerate}
Ero symmetriseen salaukseen epäsymmetrisessa salauksessa on siis se, että salaus puretaan eri avaimella kuin millä se salataan.
 
  Julkisen avaimen salausjärjestelmien tarjoama suojaus perustuu tiettyihin vaikeisiin lukuteorian ongelmiin (\cite{mavroeidis2018impact}). Monissa ongelmissa kyse on matemaattisista funktioista, jotka on helppo laskea yhteen suuntaan, mutta niiden peruuttaminen tai käänteisoperaatio taas on hyvin hankalaa. Näitä ongelmia ovat muun muassa suurten alkulukujen tekijöihinjako (\emph{Integer Factorization Problem}) sekä niin kutsuttu diskreetin logaritmin ongelma (\emph{Discrete Logarithm Problem, DLP}).
  Yksi ensimmäisiä ja tänäkin päivänä käytetyimpiä julkisen avaimen salausjärjestelmiä on RSA, joka on nimetty keksijöidensä (Rivest, Shamir ja Adleman) mukaan (\cite{montgomery1994survey}). RSA:n tarjoama suojaus perustuu suurten alkulukujen tekijöihin jakoon. RSA:n avainpari luodaan seuraavasti  (\cite{doi:10.1080/23742917.2016.1226650}):
  
  \begin{enumerate}
  
      \item Valitaan kaksi suurta alkulukua \emph{p} ja \emph{q}, missä $p \neq q$.
      
      \item Lasketaan $n = pq$.
      
      \item Lasketaan $\phi(n)\footnote{$\phi(n)$ on Eulerin $\phi$-funktio (\emph{Euler's totient}), joka kertoo montako $k \leq n$ kokonaislukua löytyy, jotka ovat \emph{n}:n kanssa suhteellisia alkulukuja (\cite{lehmer1932euler}). Kaksi alkulukua ovat suhteellisia toistensa suhteen (\emph{coprime}) kun niiden suurin yhteinen tekijä on 1 (\cite{hayward2008quantum}). } = \phi(p)\phi(q) = (p-1)(q-1)$.  Laskutoimituksesta saadaan salainen avain.
      
      \item Valitaan kokonaisluku \emph{e} siten että $1 < e < \phi(n)$ ja $syt(e, \phi(n))\footnote{\emph{Suurin yhteinen tekijä} eli suurin kokonaisluku joka jakaa \emph{e}:n sekä $\phi(n)$ (\cite{doi:10.1137/S0036144598347011})} = 1$.
      
      \item Lasketaan $d$, jolle pätee $de \equiv 1 \mod \phi(n)$.
  
  \end{enumerate}
  Nyt siis julkinen avain (\emph{n}, \emph{e}) koostuu siis jakojäännöksestä \emph{n} ja salauseksponentista (\emph{encryption exponent}) \emph{e}. Salainen avain (\emph{n}, \emph{d}) koostuu jakojäännöksestä \emph{n} ja purkueksponentista (\emph{decryption exponent}) \emph{d}.
  
 Diskreetin logaritmin ongelmassa täytyy löytää jokin kokonaisluku 
 $r$ siten että
 \[g^{r} = x \mod p\]
 (\cite{mavroeidis2018impact}). Esimerkiksi julkisen avaimen salausjärjestelmät kuten Diffie-Hellman ja elliptisen käyrän salaus (\emph{Elliptic Curve Cryptography, ECC}) hyödyntävät tätä. TÄHÄN DISKREETTIIN LOGARITMIIN LÄHTEEKSI OMA PAPERI
 
 Edellä mainitut suurien kokonaislukujen tekijöihinjako ja diskreetin logaritmin löytäminen ovat ovat laskennallisesti hyvin haastavia ongelmia ja niihin ei tunneta tehokkaita ja nopeita ratkaisuja isoilla syötteillä klassisilla tietokoneilla. Siten niillä onkin hyviä sovelluskohteita salausjärjestelmien parissa. Toisaalta kummallekkin ongelmalle tunnetaan tehokkaita ratkaisuja, jotka voidaan suorittaa kvanttitietokoneella. Peter Shor esitti vuonna 1994 Shorin algoritmin jota käyttäen edellä mainitut vaikeat lukuteorian ongelmat voidaan ratkaista tehokkaasti eli polynomisessa ajassa kvanttitietokoneella. Käsittelemme Shorin algoritmia myöhemmin kappaleessa 3.2 kvanttilaskennan yhteydessä.
 
 \section{Digitaalinen allekirjoitus}
 Digitaalinen allekirjoitus (\emph{digital signature}) on menetelmä, jolla voidaan todentaa digitaalisia dokumentteja (\cite{1649003}). Sen toimintaperiaate on analoginen perinteisiin allekirjoituksiin verrattuna. Digitaalisella allekirjoituksella todennetaan muun muassa digitaalisen dokumentin datan eheys. Eheydellä voidaan tässä kontekstissa tarkoittaa esimerkiksi dokumentin päivämäärää tai sisältämää informaatiota.
 
 Digitaalisen allekirjoituksen luominen yhdistelee edellä mainittuja salausjärjestelmiä kuten tiivistefunktioita ja julkisen tai symmetrisen avaimen salausta. Digitaalinen allekirjoitus on käytännössä bittijono, jonka jokin digitaalisen allekirjoituksen luomiseen tarkoitettu algoritmi luo. Tämä allekirjoitus muodostetaan allekirjoitettavien dokumenttien ja jonkin vain viestin lähettäjän määrittelemän tiedon mukaan. Digitaalisen allekirjoituksen luominen koostuu yleensä kolmesta eri vaiheesta; salausavaimen generointi, digitaalisen allekirjoituksen generointi ja digitaalisen allekirjoituksen varmennus. Salausavain voidaan generoida jollain edellämainituista menetelmistä kuten julkisen avaimen salauksella tai symmetrisella salauksella.